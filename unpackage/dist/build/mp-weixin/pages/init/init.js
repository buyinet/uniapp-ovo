(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/init/init"],{"30d6":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var a={ktStatusBarHeight:function(){return n.e("uni_modules/uniapp-kantboot/components/kt-status-bar-height/kt-status-bar-height").then(n.bind(null,"7547"))},ktNavBar:function(){return n.e("uni_modules/uniapp-kantboot/components/kt-nav-bar/kt-nav-bar").then(n.bind(null,"dcfa"))},uRow:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-row/u-row")]).then(n.bind(null,"ed1c"))},uCol:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-col/u-col")]).then(n.bind(null,"865f"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"10eb"))},ktButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uniapp-kantboot/components/kt-button/kt-button")]).then(n.bind(null,"7cc8"))},uDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(n.bind(null,"ca86"))},sadomasochismPopup:function(){return n.e("components/sadomasochism-popup/sadomasochism-popup").then(n.bind(null,"576b"))},introductionPopup:function(){return n.e("components/introduction-popup/introduction-popup").then(n.bind(null,"ef87"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.$kt.file.byPath("/icon/info.svg")),a=0==e.selectedBackShowList.length&&!e.requestParam.genderCode,o=a?e.$kt.file.byPath("/image/defaultShow.png"):null,r=0==e.selectedBackShowList.length&&"male"==e.requestParam.genderCode,u=r?e.$kt.file.byPath("/image/defaultShowOfMale.png"):null,i=0==e.selectedBackShowList.length&&"female"==e.requestParam.genderCode,s=i?e.$kt.file.byPath("/image/defaultShowOfFemale.png"):null,c=e.requestParam.gmtBirthday?e.$kt.util.dateFormat(e.requestParam.gmtBirthday,"yyyy-MM-dd"):null;e._isMounted||(e.e0=function(t){e.selectedAvatarPath=t},e.e1=function(t){return e.$refs.sadomasochismPopup.open(e.requestParam.sadomasochismCode)},e.e2=function(t){return e.$refs.introductionPopup.open(e.requestParam.introduction)},e.e3=function(t){e.requestParam.sadomasochismCode=t},e.e4=function(t){e.requestParam.introduction=t}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:o,g3:r,g4:u,g5:i,g6:s,g7:c}})},r=[]},"394b":function(e,t,n){"use strict";var a=n("447c"),o=n.n(a);o.a},"447c":function(e,t,n){},"72f2":function(e,t,n){"use strict";n.r(t);var a=n("ed2d"),o=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=o.a},"75da":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("3d96");a(n("66fd"));var o=a(n("eada"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},eada:function(e,t,n){"use strict";n.r(t);var a=n("30d6"),o=n("72f2");for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("394b");var u=n("f0c5"),i=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,"1d9884b4",null,!1,a["a"],void 0);t["default"]=i.exports},ed2d:function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("2eee")),r=a(n("c973")),u=a(n("85ee")),i={components:{AvatarSelect:function(){n.e("pages/init/components/AvatarSelect").then(function(){return resolve(n("75c1"))}.bind(null,n)).catch(n.oe)}},data:function(){return{sadomasochismMap:u.default.sadomasochismMap,statusBarHeight:0,filePathOfAvatar:"",requestParam:{fileIdOfAvatar:"",nickname:"",gmtBirthday:"",genderCode:"",sadomasochismCode:"",introduction:""},showOfBirthdaySelect:!1,birthdayRange:{min:new Date(1970,0,1).getTime(),max:(new Date).getTime(),defaultIndex:[]},selectedAvatarPath:null,selectedBackShowList:[],ktNavBarHeight:0}},mounted:function(){var t=this;this.statusBarHeight=e.getSystemInfoSync().statusBarHeight,this.birthdayRange.max=new Date((new Date).getFullYear()-18,(new Date).getMonth(),(new Date).getDate()).getTime(),this.birthdayRange.defaultIndex=[(new Date).getFullYear()-18-1900,(new Date).getMonth(),(new Date).getDate()-1],e.createSelectorQuery().select("#ktNavBar").boundingClientRect((function(e){t.ktNavBarHeight=e.height})).exec()},methods:{changeGenderCode:function(e){this.requestParam.genderCode=e},nicknameChange:function(e){console.log(e),this.requestParam.nickname=e.detail.value},getImageInfo:function(t){return new Promise((function(n,a){e.getImageInfo({src:t,success:function(e){n(e),console.log("获取图片成功",e)},fail:function(e){a(e),console.log("获取图片失败",e)}})}))},selectBirthday:function(){this.showOfBirthdaySelect=!0},initSelfInfo:function(){var e=this;return(0,r.default)(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedAvatarPath){t.next=3;break}return e.$refs.ktButton.error("请选择头像"),t.abrupt("return");case 3:if(e.requestParam.nickname){t.next=6;break}return e.$refs.ktButton.error("请输入昵称"),t.abrupt("return");case 6:if(e.requestParam.gmtBirthday){t.next=9;break}return e.$refs.ktButton.error("请选择生日"),t.abrupt("return");case 9:if(e.requestParam.genderCode){t.next=12;break}return e.$refs.ktButton.error("请选择性别"),t.abrupt("return");case 12:return e.$refs.ktButton.loading(),console.log("上传图片",e.selectedAvatarPath),t.next=16,new Promise((function(t,n){e.$kt.request.uploadFile({filePath:e.selectedAvatarPath,name:"file",compress:!0,formData:{groupCode:"avatar"},stateSuccess:function(n){e.requestParam.fileIdOfAvatar=n.data.id,e.$kt.request.request({url:"/system-user-web/user/initSelfInfo",method:"post",data:e.requestParam,stateSuccess:function(t){e.$refs.ktButton.success("提交成功")}}),t(n)}})}));case 16:case"end":return t.stop()}}),t)})))()},onBirthdayConfirm:function(e){this.requestParam.gmtBirthday=e.value,this.showOfBirthdaySelect=!1},onBirthdayCancel:function(e){this.showOfBirthdaySelect=!1}}};t.default=i}).call(this,n("543d")["default"])}},[["75da","common/runtime","common/vendor"]]]);